<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Car selector</title>
</head>
<body>

 
<button onclick="filterCars(c => c.price<3000)"> Cars up to £3000</button> 
<button onclick="filterCars(c => c.colour=='Red')"> Red cars</button> 
<button onclick="filterCars(c => c.colour=='Blue')"> Blue cars</button> 
<button onclick="filterCars(c => c.make=='Ford')"> Ford cars</button> 
<button onclick="filterCars(c => c.mileage<30000)"> Low mileage cars</button> 

<!-- Arrow functions are ubiquitous in modern JavaScript - they sort the boys/girls from the men/women -->
<!-- You won't get away with not understanding them in 2021 (although I did pretty well up to about 2019!)-->
<!-- *All* the modern frameworks and libaries use then extensively (React, Angular, Vue)-->
<!-- In some ways, they are 'the new SQL' -->


<h1 id='count'></h1>
<div id='results'></div>
    
<script>
    'use strict';
    
    const cars=[] //new array
    
    cars.push({make:"Ford",model:"Fiesta",colour:"Red", price:4000, mileage:63421})
    cars.push({make:"Daewoo",model:"Matiz",colour:"Blue", price:2000, mileage:28441})
    cars.push({make:"Mini",model:"One",colour:"White", price:3850, mileage:48263})
    cars.push({make:"BMW",model:"One series",colour:"Black", price:6450, mileage:51050})
    cars.push({make:"Mazda",model:"3",colour:"Blue", price:5550, mileage:58090})
    //Add a car here - *typing* out the object

    let remainingCars = cars
    outputCars()

    function outputCars(){

        document.getElementById('results').innerHTML='' //Empty the results div completely (set it to an empty string)

        for(let i=0;i<remainingCars.length;i++){            
            outputCar(remainingCars[i])        
        }

        document.getElementById("count").innerHTML= remainingCars.length + " cars match"
    }

    function filterCars(requirement){

        const toKeep=[]
        for(let i=0;i<remainingCars.length;i++){

            let car = remainingCars[i]
            if (requirement(car)){              
                toKeep.push(car)
            }
        }
        
        remainingCars=toKeep

        outputCars()
    }
    
    function outputCar(car){
                
        const div = document.createElement("div")        
        div.innerHTML=`<h1>${car.make}  ${car.model}</h1><span> £${car.price}</span><span> ${car.colour}</span><span> ${car.mileage}</span>`   //Excercise - Add the mileage and colour
        
        document.getElementById('results').appendChild (div)
       
    }


 </script>   
</body>
</html>